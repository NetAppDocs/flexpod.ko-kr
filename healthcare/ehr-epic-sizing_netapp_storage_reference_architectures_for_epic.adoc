---
sidebar: sidebar 
permalink: healthcare/ehr-epic-sizing_netapp_storage_reference_architectures_for_epic.html 
keywords: storage, reference, architecture, epic, lun, small, medium, larger, configuration 
summary: 적절한 스토리지 아키텍처는 전체 데이터베이스 크기와 총 IOPS에 따라 결정할 수 있습니다. 성능만 중요한 요소가 아니므로 추가 고객 요구사항을 기반으로 더 많은 노드 수를 사용할 수도 있습니다. 
---
= Epic을 위한 NetApp 스토리지 참조 아키텍처
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


적절한 스토리지 아키텍처는 전체 데이터베이스 크기와 총 IOPS에 따라 결정할 수 있습니다. 성능만 중요한 요소가 아니므로 추가 고객 요구사항을 기반으로 더 많은 노드 수를 사용할 수도 있습니다.

NetApp은 Epic 소프트웨어 환경의 스토리지 요구 사항을 고려하여 환경 규모에 따라 세 가지 참조 아키텍처를 제공합니다. Epic은 NetApp 사이징 방법을 사용하여 Epic 환경에서 사용할 NetApp 스토리지 시스템을 적절하게 사이징해야 합니다. 정량적 성능 요구사항 및 사이징 지침은 NetApp을 참조하십시오 https://fieldportal.netapp.com/?oparams=68786["TR-3930i: Epic을 위한 NetApp 사이징 지침"^]. 이 문서를 보려면 NetApp Field Portal에 액세스해야 합니다.

여기에 나열된 아키텍처는 설계의 시작점입니다. SPM 툴에서 디스크 수와 컨트롤러 활용률에 대한 워크로드를 검증해야 합니다. NetApp Epic 팀과 협력하여 모든 설계를 검증합니다.

All Epic은 All-Flash 어레이에 구축되어 있으며 이 보고서에서는 회전식 디스크에 필요한 디스크 풀을 All-Flash 어레이의 디스크 풀 3개로 통합했습니다. 이 섹션을 읽기 전에 Epic 스토리지 레이아웃 요구사항에 대한 Epic All-Flash 참조 아키텍처 전략 핸드북을 검토해야 합니다.

세 가지 스토리지 참조 아키텍처는 다음과 같습니다.

* * 운영 환경에서 2개의 노드가 있고 DR에서 2개의 노드로 구성된 소규모 * 4노드 아키텍처(5백만 개 미만의 글로벌 참조)
* * 중간 규모 * 운영 환경의 노드 4개와 DR의 노드 2개가 포함된 6노드 아키텍처(5백만 개 이상의 글로벌 참조)
* * 대규모. * 운영 환경에서 6개~10개의 노드로 구성된 12개 이상의 노드 아키텍처(5백만~1천만 개의 글로벌 참조)



NOTE: 글로벌 참조 = (읽기 IOPS + (80초당 쓰기 작업 버스트/45)) * 225. 이러한 번호는 고객별 Epic 하드웨어 구성 가이드에서 발췌한 것입니다.



== 스토리지 레이아웃 및 LUN 구성

Epic의 고가용성(HA_ 및 이중화 요구 사항)을 충족하기 위한 첫 번째 단계는 Epic 소프트웨어 환경을 위한 스토리지 레이아웃을 설계하는 것입니다. 설계 고려 사항에는 전용 고성능 스토리지에서 디스크 풀 1과 디스크 풀 2를 분리하는 것이 포함됩니다. 각 디스크 풀의 워크로드에 대한 내용은 Epic All-Flash 참조 아키텍처 전략 핸드북을 참조하십시오.

각 디스크 풀을 별도의 노드에 배치하면 Epic의 운영 워크로드와 비운영 워크로드를 격리하는 데 필요한 장애 도메인이 생성됩니다. 노드당 하나의 애그리게이트를 사용하면 디스크 사용률과 애그리게이트 친화성이 최대화되어 더 나은 성능을 제공합니다. 또한 애그리게이트 레벨의 중복제거를 통해 스토리지 효율성을 극대화할 수 있습니다.

Epic을 사용하면 스토리지 리소스를 비운영 요구사항에 맞게 공유할 수 있으므로 스토리지 시스템에서 VDI(가상 데스크톱 인프라), CIFS 등과 같은 Clarity 서버 및 운영 서비스 스토리지 요구사항을 모두 충족할 수 있습니다.

Epic 데이터베이스 스토리지의 레이아웃 권장 사항 문서에서는 각 데이터베이스의 LUN 크기 및 개수에 대한 권장 사항을 제공합니다. 이러한 권장 사항은 고객의 환경에 따라 조정해야 할 수 있습니다. Epic 지원과 함께 이러한 권장사항을 검토하고 LUN 및 LUN 크기 수를 마무리하는 것이 중요합니다.

[NOTE]
====
LUN 자체에는 스토리지 비용이 들지 않으므로 더 큰 크기의 LUN부터 시작하는 것이 좋습니다. 간편한 운영을 위해 3년 후 LUN 수와 초기 크기가 예상 요구사항을 훨씬 넘어 확장할 수 있는지 확인하십시오. LUN의 확장은 확장 중에 LUN을 추가하는 것보다 훨씬 더 쉽게 관리할 수 있습니다. 씬 프로비저닝된 LUN 및 볼륨의 경우 스토리지 사용 공간이 애그리게이트에 표시됩니다.

EPIC는 데이터베이스, 저널 및 애플리케이션 또는 시스템 스토리지를 FC를 통해 데이터베이스 서버에 LUN으로 제공해야 합니다.

====
Epic 프로덕션과 Clarity에 대해 볼륨당 LUN 하나를 사용합니다. 대규모 구축의 경우 Epic 데이터베이스에 대해 24~32개의 LUN을 사용하는 것이 좋습니다. 사용할 LUN 수를 결정하는 요인은 다음과 같습니다.

* 3년 후 Epic DB의 전체 크기 큰 DB의 경우 해당 운영 체제(OS)의 LUN 크기를 확인하고 확장할 LUN이 충분한지 확인합니다. 예를 들어, 60TB Epic 데이터베이스가 필요하고 OS LUN의 최대 용량이 4TB인 경우 확장 및 헤드룸을 제공하려면 24~32개의 LUN이 필요합니다.


아키텍처의 규모가 작든, 중형이든, 대규모이든 상관 없이 다음을 수행할 수 있습니다.

* ONTAP를 사용하면 무중단 확장과 스케일아웃을 간편하게 수행할 수 있습니다. ONTAP 무중단 운영을 사용하면 디스크와 노드를 업그레이드, 추가 또는 제거할 수 있습니다. 고객은 4개 노드에서 시작하여 6개 노드로 이동하거나 중단 없이 대규모 컨트롤러로 업그레이드할 수 있습니다.
* NetApp OnCommand Workflow Automation 워크플로우에서 Epic 전체 복사본 테스트 환경을 백업 및 업데이트할 수 있습니다. 이 솔루션은 아키텍처를 단순화하고 스토리지 용량을 통합 효율성으로 절감해 줍니다.
* DR 섀도우 데이터베이스 서버는 고객의 무중단 업무 운영 전략의 일부입니다(SRO 기능을 지원하고 SRW 인스턴스로 구성될 가능성이 있는 경우 사용). 따라서 세 번째 스토리지 시스템의 배치 및 사이징은 일반적으로 운영 데이터베이스 스토리지 시스템과 동일합니다.
* 데이터베이스 정합성을 위해 몇 가지 사항을 고려해야 합니다. 비즈니스 연속성과 관련하여 NetApp SnapMirror 백업 복사본을 사용하는 경우, Epic 문서 Business Continuity Technical Solutions Guide를 참조하십시오. SnapMirror 기술 사용에 대한 자세한 내용은 를 참조하십시오 https://www.netapp.com/us/media/tr-3446.pdf["TR-3446: SnapMirror 비동기 개요 및 모범 사례 가이드"^].
* 잠재적인 대규모 워크로드로부터 운영을 분리하는 것이 Epic의 주요 설계 목표입니다. 스토리지 풀은 워크로드 성능을 격리하고 보호해야 하는 장애 도메인입니다. ONTAP 클러스터의 각 노드는 장애 도메인이며 스토리지 풀로 간주될 수 있습니다.


ONTAP 제품군의 모든 플랫폼에서 Epic 워크로드에 필요한 모든 기능 세트를 실행할 수 있습니다.



== 소규모 구성: 5백만 개 미만의 글로벌 참조를 위한 4노드 참조 아키텍처(최대 총 IOPS 2만 2천 개)

작은 레퍼런스 아키텍처는 4노드 아키텍처로, 운영 사이트 2개와 DR 노드 2개로 구성된 글로벌 레퍼런스 수가 5백만 개 미만인 4노드 아키텍처입니다. 이 아키텍처는 전 세계적으로 5백만 개 미만의 참조를 가진 고객이 사용할 수 있습니다. 이 크기에서는 Report(보고서)와 Clarity를 분리할 필요가 없습니다.

NetApp의 고유한 멀티 프로토콜 지원, QoS 및 동일한 클러스터에서 장애 도메인을 생성하는 기능을 통해 단일 HA 쌍에서 디스크 pool1 및 디스크 pool2의 모든 운영 워크로드를 실행하고 NetApp의 모든 모범 사례 및 Epic의 High Comfort 등급 요구사항을 충족할 수 있습니다. 모든 디스크 풀 1은 노드 1에서 실행되며 모든 디스크 풀 2는 풀 2에서 실행됩니다.

ONTAP에서 동일한 클러스터에 있는 워크로드를 분리하고 ONTAP 멀티프로토콜 지원을 제공하는 모든 운영 Epic 워크로드(운영, 보고서, 명확성, VMware, Citrix, CIFS 및 Epic 관련 워크로드)를 단일 클러스터의 단일 HA 쌍에서 실행할 수 있습니다. 이 기능을 사용하면 Epic의 모든 요구사항(Epic All-Flash 참조 아키텍처 전략 핸드북에 설명되어 있음)과 NetApp의 모든 모범 사례를 충족할 수 있습니다. 기본적으로 pool1은 노드 prod-01에서 실행되며 pool2는 아래 그림과 같이 prod-02에서 실행됩니다. NetApp 멀티 프로토콜 NAS 및 SAN 기능을 통해 NAS 1 워크로드를 노드 2에 배치할 수 있습니다.

재해 복구를 위해 Epic DR 풀 3은 HA 쌍의 두 노드 간에 분산됩니다. EPIC DR은 노드 DR-01에서 실행되며 DR 서비스는 DR-02에서 실행됩니다.

NetApp SnapMirror 또는 SnapVault 복제를 워크로드에 필요한 대로 설정할 수 있습니다.

image:ehr-epic-sizing_image2.png["오류: 그래픽 이미지가 없습니다"]

스토리지 설계 및 레이아웃 관점에서 다음 그림은 운영 데이터베이스를 위한 상위 수준의 스토리지 레이아웃과 Epic 워크로드를 구성하는 다른 구조를 보여줍니다.

image:ehr-epic-sizing_image3.png["오류: 그래픽 이미지가 없습니다"]



== 중간 규모 구성: 5백만 개 이상의 글로벌 참조를 위한 6노드 참조 아키텍처(22K~50K 총 IOPS)

중간 규모 레퍼런스 아키텍처는 6노드 아키텍처로서 운영 노드 4개와 DR 노드 2개로 5백만~1천만 개의 글로벌 참조를 가지고 있습니다.

All-Flash 참조 아키텍처 전략 핸드북에서는 이러한 규모의 Epic 보고서 워크로드를 Clarity에서 분리해야 하며 운영 환경에 최소 4개의 노드가 필요하다고 설명합니다.

6노드 아키텍처는 Epic 환경에서 가장 일반적으로 구축된 아키텍처입니다. 500만 건 이상의 글로벌 참조를 가진 고객은 별도의 결함 영역에 Report 및 Clarity를 배치해야 합니다. Epic All-Flash 참조 아키텍처 전략 핸드북을 참조하십시오.

글로벌 레퍼런스가 5,000,000개 미만인 고객은 다음과 같은 주요 이점을 위해 4개 노드가 아닌 6개 노드로 확장할 수 있습니다.

* 백업 아카이브 프로세스를 운영 환경에서 오프로드합니다
* 모든 테스트 환경을 운영 환경에서 오프로드


운영 은 노드 prod-01에서 실행됩니다. 보고서는 운영 환경의 최신 Epic 미러 복사본인 prod-02에서 실행됩니다. 지원, 릴리즈, 릴리즈 검증과 같은 테스트 환경을 Epic 운영, 보고서, DR에서 복제할 수 있습니다. 아래 그림에서는 전체 복사본 테스트 환경의 운영 환경에서 생성된 클론을 보여 줍니다.

두 번째 HA 쌍은 운영 서비스 스토리지 요구사항에 사용됩니다. 이러한 워크로드에는 Clarity 데이터베이스 서버(SQL 또는 Oracle), VMware, 하이퍼스페이스 및 CIFS용 스토리지가 포함됩니다. 고객이 타사 워크로드를 이 아키텍처의 노드 3과 노드 4에 추가하거나, 동일한 클러스터의 개별 HA 쌍에 추가할 수 있습니다.

SnapMirror 기술은 프로덕션 데이터베이스를 두 번째 HA 쌍에 대한 스토리지 레벨 복제에 사용됩니다. SnapMirror 백업 복사본을 사용하여 지원, 릴리즈, 릴리즈 검증과 같은 비운영 환경을 위한 보조 스토리지 시스템에서 NetApp FlexClone 볼륨을 생성할 수 있습니다. 운영 데이터베이스의 스토리지 레벨 복제본은 고객의 DR 전략 구현을 지원할 수도 있습니다.

선택적으로 스토리지 효율성을 높이기 위해 Report NetApp Snapshot 복사본 백업에서 전체 테스트 클론을 생성하고 노드 2에서 직접 실행할 수 있습니다. 이 설계에서는 SnapMirror 대상 복사본을 디스크에 저장할 필요가 없습니다.

image:ehr-epic-sizing_image4.png["오류: 그래픽 이미지가 없습니다"]

다음 그림에서는 6노드 아키텍처의 스토리지 레이아웃을 보여 줍니다.

image:ehr-epic-sizing_image5.png["오류: 그래픽 이미지가 없습니다"]



== 대규모 구성: 1천만 개 이상의 글로벌 참조를 위한 참조 아키텍처(50K IOPS 이상)

대규모 아키텍처는 일반적으로 12개 이상의 노드 아키텍처로, 운영 환경에서 6개~10개의 노드를 갖추고 있으며, 1천만 개 이상의 글로벌 참조를 가지고 있습니다. 대규모 Epic 배포의 경우 아래 그림과 같이 Epic Production, Epic Report 및 Clarity를 노드 간에 균등하게 분산된 전용 HA 쌍에 배치할 수 있습니다.

대기업 고객은 다음 두 가지 옵션을 사용할 수 있습니다.

* 6노드 아키텍처를 유지하고 AFF A700 컨트롤러 사용
* 전용 AFF A300 HA 쌍에서 Epic 운영, 보고서, DR을 실행합니다.


SPM을 사용하여 컨트롤러 활용률을 비교해야 합니다. 또한 컨트롤러를 선택할 때는 랙 공간과 전력을 고려하십시오.

image:ehr-epic-sizing_image6.png["오류: 그래픽 이미지가 없습니다"]

다음 그림에서는 대규모 참조 아키텍처를 위한 스토리지 레이아웃을 보여 줍니다.

image:ehr-epic-sizing_image7.png["오류: 그래픽 이미지가 없습니다"]
