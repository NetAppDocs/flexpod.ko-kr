---
sidebar: sidebar 
permalink: healthcare/ehr-epic-deploy_design.html 
keywords: design, flexpod, epic, cisco, architecture, storage, layout, volume, lun, configuration 
summary: 'FlexPod for Epic의 아키텍처는 Epic, Cisco, NetApp의 지침과 다양한 규모의 Epic 고객과 함께 일하는 파트너 경험을 바탕으로 합니다. 고객 데이터센터 전략(소규모 또는 대규모, 중앙 집중식, 분산, 멀티테넌트 등)에 따라 에픽 모범 사례를 적용할 수 있습니다.' 
---
= 설계
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


FlexPod for Epic의 아키텍처는 Epic, Cisco, NetApp의 지침과 다양한 규모의 Epic 고객과 함께 일하는 파트너 경험을 바탕으로 합니다. 고객 데이터센터 전략(소규모 또는 대규모, 중앙 집중식, 분산, 멀티테넌트 등)에 따라 에픽 모범 사례를 적용할 수 있습니다.

올바른 스토리지 아키텍처는 총 IOPS의 전체 크기에 따라 결정됩니다. 성능만 중요한 요소가 아니므로 추가 고객 요구사항을 기반으로 더 많은 노드 수를 고려할 수도 있습니다. NetApp을 사용할 경우 요구사항의 변화에 따라 중단 없이 손쉽게 클러스터를 확장할 수 있습니다. 또한 운영 중단 없이 클러스터에서 노드를 제거하여 용도를 변경하거나 장비 업데이트 중에 노드를 제거할 수 있습니다.

NetApp ONTAP 스토리지 아키텍처의 이점은 다음과 같습니다.

* * 손쉬운 무중단 스케일업 및 스케일아웃 * ONTAP 무중단 운영을 사용하면 디스크와 노드를 업그레이드, 추가, 제거할 수 있습니다. 고객은 4개 노드에서 시작하여 6개 노드로 이동하거나 중단 없이 대규모 컨트롤러로 업그레이드할 수 있습니다.
* * 스토리지 효율성 * 중복제거, FlexClone, 인라인 압축, 인라인 컴팩션, 씬 복제를 통해 총 용량 요구사항 감소 씬 프로비저닝 및 애그리게이트 중복제거. FlexClone 기능을 사용하면 거의 즉시 클론을 생성하여 백업 및 테스트 환경 업데이트를 지원할 수 있습니다. 이러한 클론은 변경된 경우에만 추가 스토리지를 사용합니다.
* * OnCommand WFA 워크플로우를 통해 Epic 전체 복사본 테스트 환경을 백업 및 업데이트할 수 있습니다. * 이 솔루션은 아키텍처를 단순화하고 스토리지 용량을 통합 효율성으로 절감해 줍니다. 이러한 아키텍처는 Epic의 백업 솔루션에 있어 중요한 요소이며, 스토리지 통합을 활용하여 모든 백업 솔루션과 통합합니다.
* * DR 섀도우 데이터베이스 서버. * DR 섀도우 데이터베이스 서버는 고객의 비즈니스 연속성 전략의 일부입니다(스토리지 읽기 전용[SRO] 기능을 지원하고 스토리지 읽기/쓰기[SRW] 인스턴스로 구성될 수 있습니다). 따라서 세 번째 스토리지 시스템의 배치 및 사이징은 대부분 운영 데이터베이스 스토리지 시스템과 동일합니다.
* * 데이터베이스 일관성(일부 고려 사항 필요) * 비즈니스 연속성과 관련하여 SnapMirror 백업 복사본을 사용하는 경우 “Epic 비즈니스 연속성 기술 솔루션 가이드” 문서를 참조하십시오. "SnapMirror 기술 사용에 대한 자세한 내용은 을 참조하십시오 http://media.netapp.com/documents/tr-3446.pdf["TR-3446: SnapMirror 비동기 개요 및 모범 사례 가이드"^].
* * 잠재적인 대규모 워크로드로부터 운영을 격리하는 것은 Epic의 주요 설계 목표입니다. * 스토리지 풀은 워크로드 성능을 격리하고 보호해야 하는 오류 도메인입니다. ONTAP 클러스터의 각 노드는 장애 도메인이며 스토리지 풀로 간주될 수 있습니다.


ONTAP 제품군의 모든 플랫폼에서 Epic 워크로드에 필요한 모든 기능 세트를 실행할 수 있습니다.



== 스토리지 아키텍처

아래 그림은 Epic 환경에서 일반적으로 구축되는 6노드 아키텍처를 보여줍니다. 4노드 또는 12노드 구축도 있지만, 이러한 아키텍처는 단지 설계의 참조 또는 시작점일 뿐입니다. 에서 워크로드를 검증해야 합니다 https://spm.netapp.com["SPM"^] 디스크 수 및 컨트롤러 활용률에 대한 사이징 툴 모든 Epic 운영 기능은 AFF 어레이에 구축되어 있습니다. Epic 스토리지 레이아웃 요구사항에 대한 자세한 내용은 Epic All-Flash 참조 아키텍처 전략 핸드북을 참조하십시오.


NOTE: NetApp Epic 팀과 협력하여 모든 설계를 검증합니다. Epic은 NetApp 사이징 방법을 사용하여 Epic 환경에서 사용할 NetApp 스토리지 시스템을 적절하게 사이징해야 합니다. 자세한 내용은 을 참조하십시오 https://fieldportal.netapp.com/content/192412["TR-3930i: Epic을 위한 NetApp 사이징 지침"^]. 이 문서를 보려면 NetApp Field Portal에 액세스해야 합니다.

6노드 아키텍처에는 운영을 위한 4개의 노드와 DR을 위한 2개의 노드가 있습니다. Epic All-Flash 레퍼런스 아키텍처 전략 핸드북에서는 4노드 운영 환경의 이 아키텍처에서 Epic 보고서 워크로드를 Clarity에서 분리할 수 있다고 설명합니다.

6개 노드로 진행하면 다음과 같은 주요 이점이 있습니다.

* 백업 아카이브 프로세스를 운영 환경에서 오프로드할 수 있습니다
* 모든 테스트 환경을 운영 환경에서 오프로드할 수 있습니다


운영 은 노드 prod-01에서 실행됩니다. 보고서는 운영 환경의 최신 Epic 미러 복사본인 prod-02에서 실행됩니다. 지원, 릴리스 및 릴리스 검증(SUP, REL 및 RELVAL)과 같은 테스트 환경은 Epic 프로덕션, 보고서 또는 DR에서 즉시 클론을 생성할 수 있습니다. 다음 그림에서는 전체 복사본 테스트 환경의 운영 환경에서 생성된 클론을 보여 줍니다.

두 번째 HA 쌍은 운영 서비스 스토리지 요구사항에 사용됩니다. 이러한 워크로드에는 Clarity 데이터베이스 서버(SQL 또는 Oracle), VMware, 하이퍼스페이스 및 CIFS용 스토리지가 포함됩니다. 고객이 타사 워크로드를 이 아키텍처의 노드 3과 4에 추가하거나 동일한 클러스터의 별도 HA 쌍에 추가할 수 있습니다.

SnapMirror 기술은 프로덕션 데이터베이스를 두 번째 HA로 스토리지 수준으로 복제하는 데 사용됩니다. SnapMirror 백업 복사본을 사용하여 지원, 릴리즈, 릴리즈 검증과 같은 비운영 환경을 위한 보조 스토리지 시스템에서 FlexClone 볼륨을 생성할 수 있습니다. 운영 데이터베이스의 스토리지 레벨 복제본은 고객의 DR 전략 구현을 지원할 수도 있습니다.

선택적으로 스토리지 효율성을 높이기 위해 Snapshot 복사본 백업 보고서에서 전체 테스트 클론을 만들고 노드 2에서 직접 실행할 수 있습니다. 이 설계에서는 SnapMirror 대상 복사본을 디스크에 저장할 필요가 없습니다.

image:ehr-epic-deploy_image7.png["오류: 그래픽 이미지가 없습니다"]



== 스토리지 설계 및 레이아웃

Epic의 HA 및 이중화 요구사항을 충족하기 위한 첫 번째 단계는 디스크 풀 1을 디스크 풀 2에서 전용 고성능 스토리지로 분리하는 등 Epic 소프트웨어 환경을 위한 스토리지 레이아웃을 설계하는 것입니다. 각 디스크 풀의 워크로드에 대한 내용은 Epic All-Flash 참조 아키텍처 전략 핸드북을 참조하십시오.

각 디스크 풀을 별도의 노드에 배치하면 운영 워크로드와 비운영 워크로드를 Epic 격리하는 데 필요한 장애 도메인이 생성됩니다. 노드당 하나의 애그리게이트를 사용하면 디스크 사용률과 애그리게이트 친화성이 최대화되어 더 나은 성능을 제공합니다. 또한 애그리게이트 레벨의 중복제거를 통해 스토리지 효율성을 극대화할 수 있습니다.

Epic을 사용하면 스토리지 리소스를 비운영 요구사항에 맞게 공유할 수 있으므로 스토리지 시스템에서 VDI, CIFS 등과 같은 Clarity 서버와 운영 서비스의 스토리지 요구사항을 모두 충족할 수 있습니다.

아래 그림은 6노드 아키텍처의 스토리지 레이아웃을 보여 줍니다. 각 스토리지 시스템은 완전히 이중화된 HA 쌍의 단일 노드입니다. 이 레이아웃을 통해 각 컨트롤러의 활용률을 극대화하고 스토리지 효율성이 높아집니다.

image:ehr-epic-deploy_image8.png["오류: 그래픽 이미지가 없습니다"]



=== 스토리지 노드 구성

* 고가용성 *

HA Pair 노드에서 노드로 구성된 스토리지 시스템은 노드 장애의 영향을 줄이고 스토리지 시스템의 무중단 업그레이드를 지원합니다. 다중 경로가 있는 노드에 연결된 디스크 쉘프는 노드 페일오버 중 성능 일관성을 향상하면서 단일 경로 장애로부터 보호하여 스토리지 복원력을 향상합니다.

* 하드웨어 지원 페일오버 *

하드웨어 지원 페일오버는 한 노드의 원격 LAN 모듈 또는 서비스 프로세서 모듈이 하트비트 시간 초과 트리거보다 빠르게 노드 장애를 파트너에게 알려주기 때문에 스토리지 노드 페일오버 시간을 최소화합니다. 스토리지가 가상화되면 페일오버 중에 컨트롤러 ID를 이동할 필요가 없으므로 페일오버 시간이 단축됩니다. 소프트웨어 디스크 소유자만 변경됩니다.

* NetApp 지원 툴 및 서비스 *

NetApp은 완벽한 지원 툴 및 서비스 세트를 제공합니다. 하드웨어 장애 또는 시스템 구성 오류가 발생할 경우 NetApp 스토리지 시스템에서 NetApp AutoSupport 툴을 사용하도록 설정하고 구성해야 합니다. 또한 미션 크리티컬 환경의 경우 SupportEdge Premium 패키지를 활용하여 운영 전문 지식과 지원 시간 연장, 부품 교체 시 빠른 응답 시간을 제공하는 것이 좋습니다.

AFF A300 및 AFF A700 컨트롤러 * 에서 All-Flash에 최적화된 퍼스낼리티

AFF 솔루션이 정상적으로 작동하려면 All-Flash에 최적화된 FAS80x0 시스템의 HA 쌍에서 두 노드 모두에서 환경 변수 bootarg.init.flash_optimized` 를 "참"으로 설정해야 합니다. All-Flash 최적화 퍼스낼리티가 포함된 플랫폼은 SSD만 지원합니다.



=== 볼륨 구성

Snapshot 복사본 *

운영 데이터베이스를 위한 스토리지를 제공하는 볼륨에 대해 야간 볼륨 레벨 스냅샷 스케줄을 설정해야 합니다. 볼륨 레벨 스냅샷 복사본을 개발, 테스트, 스테이징과 같은 비운영 환경에서 사용할 운영 데이터베이스의 클론 복제 소스로 사용할 수도 있습니다. NetApp은 운영 데이터베이스 백업 및 테스트 환경 업데이트를 자동화하는 OnCommand WFA 워크플로우를 Epic에 맞게 개발했습니다. 이러한 워크플로우를 활용하면 데이터베이스를 고정 및 고정 해제하고, 애플리케이션 정합성이 보장되는 스냅샷 복사본을 생성할 수 있습니다. 운영 환경의 백업 복제본은 지원, 릴리즈 및 릴리즈 검증을 위해 테스트 서버에 자동으로 제공됩니다. 이러한 워크플로는 백업 스트리밍 및 무결성 검사에 사용할 수도 있습니다.

Snapshot 복사본을 사용하여 Epic 운영 데이터베이스의 복원 작업을 지원할 수 있습니다.

SnapMirror를 사용하여 Snapshot 복사본을 프로덕션과 별도로 스토리지 시스템에 유지할 수 있습니다.

SAN 볼륨의 경우 각 볼륨의 기본 스냅샷 정책을 사용하지 않도록 설정합니다. 이러한 스냅샷 복사본은 일반적으로 백업 애플리케이션 또는 OnCommand WFA 워크플로우를 통해 관리됩니다. 디스크 사용률을 최대화하려면 모든 효율성 설정을 켜는 것이 좋습니다.

* 볼륨 선호도 *

동시 처리를 지원하기 위해 ONTAP는 시작 시 사용 가능한 하드웨어를 평가하고 집계와 볼륨을 affinities라고 하는 별도의 클래스로 나눕니다. 일반적으로 한 선호도에 속하는 볼륨은 다른 친화도에 있는 볼륨과 병렬로 서비스될 수 있습니다. 반면, 동일한 선호도에 있는 두 볼륨은 노드의 CPU에서 일정 시간(직렬 처리)을 기다리는 동안 교대로 대기해야 하는 경우가 많습니다.

AFF A300 및 AFF A700에는 노드당 단일 애그리게이트 친화도와 4개의 볼륨 친화성이 있습니다. 최상의 노드 활용과 볼륨 선호도의 사용을 위해 스토리지 레이아웃은 노드당 하나의 aggregate와 노드당 4개 이상의 볼륨이 되어야 합니다. 일반적으로 Epic 데이터베이스에는 8개의 볼륨 또는 LUN이 사용됩니다.



=== LUN 구성

“Epic Database Storage Layout Recommendations” 문서에는 각 데이터베이스의 LUN 크기와 수가 자세히 나와 있습니다. 고객이 Epic을 이용하여 LUN과 LUN 크기를 최종적으로 확인하고 필요한 경우 약간 조정해야 할 수 있습니다.

LUN 자체에는 스토리지 비용이 들지 않으므로 더 큰 크기의 LUN부터 시작하는 것이 좋습니다. 간편한 운영을 위해 3년 후 LUN 수와 초기 크기가 예상 요구사항을 훨씬 넘어 확장할 수 있는지 확인하십시오. LUN의 확장은 확장할 때 LUN을 추가하는 것보다 훨씬 더 쉽게 관리할 수 있습니다. LUN 및 볼륨에 씬 프로비저닝이 있을 경우 사용된 스토리지만 애그리게이트에 표시됩니다.

Epic 프로덕션과 Clarity에 대해 볼륨당 LUN 하나를 사용합니다. 대규모 배포의 경우 Epic 데이터베이스에 대해 24~32개의 LUN을 권장합니다.

사용할 LUN 수를 결정하는 요인은 다음과 같습니다.

* 3년 후 Epic DB의 전체 크기 큰 DB의 경우 해당 OS의 LUN 크기를 확인하고 확장할 LUN이 충분한지 확인합니다. 예를 들어, 60TB Epic 데이터베이스가 필요하고 OS LUN의 최대 용량이 4TB인 경우 확장 및 여유 공간을 제공하려면 24~32개의 LUN이 필요합니다.



NOTE: EPIC는 데이터베이스, 저널 및 애플리케이션 또는 시스템 스토리지를 FC를 통해 데이터베이스 서버에 LUN으로 제공해야 합니다.
