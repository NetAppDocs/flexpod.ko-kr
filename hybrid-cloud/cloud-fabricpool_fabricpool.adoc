---
sidebar: sidebar 
permalink: hybrid-cloud/cloud-fabricpool_fabricpool.html 
keywords: flexpod, cloud, fabricpool, overview, hybrid, storage, solution sdd, performance 
summary: 'FabricPool은 ONTAP의 하이브리드 스토리지 솔루션으로, All-Flash(SSD) 애그리게이트를 성능 계층으로 사용하고 퍼블릭 클라우드 서비스의 오브젝트 저장소를 클라우드 계층으로 사용합니다. 이 구성을 사용하면 데이터 액세스 빈도 여부에 따라 정책 기반 데이터 이동이 가능합니다.' 
---
= FabricPool
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/




== FabricPool 개요

FabricPool은 ONTAP의 하이브리드 스토리지 솔루션으로, All-Flash(SSD) 애그리게이트를 성능 계층으로 사용하고 퍼블릭 클라우드 서비스의 오브젝트 저장소를 클라우드 계층으로 사용합니다. 이 구성을 사용하면 데이터 액세스 빈도 여부에 따라 정책 기반 데이터 이동이 가능합니다. FabricPool는 FAS에서 AFF 플랫폼의 ONTAP 및 All-SSD 애그리게이트를 모두 지원합니다. 데이터 처리는 블록 레벨에서 수행되며, 자주 액세스되는 데이터 블록은 All-Flash 성능 계층에서 핫 블록으로 태깅되고 자주 액세스하지 않는 블록이 콜드 블록으로 태깅됩니다.

FabricPool를 사용하면 성능, 효율성, 보안 또는 보호 기능의 저하 없이 스토리지 비용을 절감할 수 있습니다. FabricPool는 엔터프라이즈 애플리케이션에 투명하며, 애플리케이션 인프라를 재설계할 필요 없이 스토리지 TCO를 절감하여 클라우드 효율성을 사용합니다.

FlexPod은 FabricPool의 스토리지 계층화 기능을 활용하여 ONTAP 플래시 스토리지를 더욱 효율적으로 사용할 수 있습니다. NetApp SnapCenter for vSphere의 비활성 가상 머신(VM), 자주 사용되지 않는 VM 템플릿, VM 백업은 데이터 저장소 볼륨에서 귀중한 공간을 소모할 수 있습니다. 콜드 데이터를 클라우드 계층으로 이동하여 FlexPod 인프라에 호스팅된 고성능, 미션 크리티컬 애플리케이션을 위한 공간과 리소스를 확보할 수 있습니다.


NOTE: Fibre Channel 및 iSCSI 프로토콜은 일반적으로 시간 초과(60-120초)가 발생하기 전에 더 오래 걸리지만 NAS 프로토콜과 같은 방식으로 연결을 다시 시도하지 않습니다. SAN 프로토콜 시간이 초과되면 애플리케이션을 다시 시작해야 합니다. 짧은 운영 중단이라도 SAN 프로토콜을 사용하는 운영 애플리케이션에 심각한 영향을 줄 수 있습니다. 퍼블릭 클라우드에 대한 연결을 보장할 방법이 없기 때문입니다. 이 문제를 방지하려면 SAN 프로토콜을 통해 액세스하는 데이터를 계층화할 때 프라이빗 클라우드를 사용하는 것이 좋습니다.

ONTAP 9.6에서 FabricPool는 Alibaba 클라우드 오브젝트 스토리지 서비스, Amazon AWS S3, Google 클라우드 스토리지, IBM 클라우드 오브젝트 스토리지, Microsoft Azure Blob Storage 등 주요 퍼블릭 클라우드 공급자와 통합됩니다. 이 보고서에서는 Amazon AWS S3 스토리지를 원하는 클라우드 오브젝트 계층으로 중점적으로 다룹니다.



== 복합 집계

FabricPool 인스턴스는 ONTAP 플래시 애그리게이트를 AWS S3 버킷과 같은 클라우드 오브젝트 저장소와 연결하여 복합 애그리게이트를 만들어 냅니다. 복합 집계 내에 볼륨이 생성되면 FabricPool의 계층화 기능을 활용할 수 있습니다. 볼륨에 데이터를 쓸 때 ONTAP은 각 데이터 블록에 온도를 할당합니다. 블록이 처음 기록되면 뜨거워진 온도가 할당됩니다. 시간이 경과함에 따라 데이터에 액세스하지 않으면 마지막으로 콜드 상태가 할당될 때까지 냉각 프로세스가 수행됩니다. 자주 액세스하지 않는 데이터 블록은 성능 SSD 애그리게이트와 클라우드 오브젝트 저장소로 계층화합니다.

블록이 콜드 블록으로 지정된 시점과 클라우드 오브젝트 스토리지로 이동한 시점 간의 기간은 ONTAP의 볼륨 계층화 정책에 의해 수정됩니다. 블록 냉각에 필요한 일 수를 제어하는 ONTAP 설정을 수정하여 더 세부적으로 설정할 수 있습니다. 데이터 계층화는 기존 볼륨 스냅샷, vSphere VM 백업용 SnapCenter 및 기타 NetApp Snapshot 기반 백업, VM 템플릿, 자주 액세스하지 않는 VM 데이터 등 vSphere 데이터 저장소에서 자주 사용하지 않는 블록입니다.



=== 비활성 데이터 보고

비활성 데이터 보고(IDR)는 ONTAP에서 사용할 수 있으며, 이를 통해 집계에서 계층화할 수 있는 콜드 데이터의 양을 평가할 수 있습니다. IDR은 ONTAP 9.6에서 기본적으로 활성화되어 있으며, 볼륨의 비활성 데이터를 결정하기 위해 기본 31일 냉각 정책을 사용합니다.


NOTE: 계층화하는 콜드 데이터의 양은 볼륨에 설정된 계층화 정책에 따라 달라집니다. 이 양은 기본 31일 냉각 기간을 사용하여 IDR에서 감지한 콜드 데이터 양과 다를 수 있습니다.



== 오브젝트 생성 및 데이터 이동

FabricPool는 NetApp WAFL 블록 레벨에서 작동하며, 냉각 블록을 스토리지 오브젝트로 연결하고 이러한 오브젝트를 클라우드 계층으로 마이그레이션합니다. 각 FabricPool 개체는 4MB이며 1,024개의 4KB 블록으로 구성됩니다. 주요 클라우드 공급업체의 성능 권장 사항에 따라 개체 크기가 4MB로 수정되며 변경할 수 없습니다. 콜드 블록을 읽고 핫 상태로 만든 경우 4MB 객체에서 요청된 블록만 페치되어 성능 계층으로 다시 이동됩니다. 전체 오브젝트와 전체 파일이 다시 마이그레이션되지 않습니다. 필요한 블록만 마이그레이션됩니다.


NOTE: ONTAP에서 순차적 읽기에 대한 기회를 감지할 경우 성능을 향상시키기 위해 클라우드 계층에서 블록을 읽은 후 이를 읽습니다.

기본적으로 성능 애그리게이트의 활용률이 50% 이상인 경우에만 데이터가 클라우드 계층으로 이동됩니다. 이 임계값은 성능 플래시 계층에서 더 적은 양의 데이터 스토리지를 클라우드로 이동할 수 있도록 더 낮은 비율로 설정할 수 있습니다. 이 기능은 계층화 전략이 콜드 데이터를 이동하는 경우 애그리게이트의 용량이 거의 도달한 경우에만 유용할 수 있습니다.

성능 계층 활용률이 70% 이상인 경우, 성능 계층에 다시 기록되지 않고 클라우드 계층에서 콜드 데이터를 직접 읽습니다. FabricPool는 자주 사용되는 애그리게이트에서 콜드 데이터 쓰기를 방지함으로써 활성 데이터에 대한 애그리게이트를 보존합니다.



== 성능 계층 공간을 재확보할 수 있습니다

앞서 설명했듯이, FabricPool의 주요 사용 사례는 고성능 사내 플래시 스토리지를 가장 효율적으로 사용하는 것입니다. FlexPod 가상 인프라의 볼륨 스냅샷과 VM 백업의 형태로 콜드 데이터는 상당히 많은 비용이 드는 플래시 스토리지를 차지할 수 있습니다. 스냅샷 전용 또는 자동의 두 가지 계층화 정책 중 하나를 구현하여 중요한 성능 계층 스토리지를 확보할 수 있습니다.



=== 스냅샷 전용 계층화 정책

다음 그림에 나와 있는 스냅샷 전용 계층화 정책은 공간을 차지하지만 활성 파일 시스템과 블록을 공유하지 않는 VM의 vSphere 백업을 위한 SnapCenter 및 콜드 볼륨 스냅샷 데이터를 클라우드 오브젝트 저장소로 이동합니다. 스냅샷 전용 계층화 정책은 콜드 데이터 블록을 클라우드 계층으로 이동합니다. 복원이 필요한 경우 클라우드의 콜드 블록이 핫 상태로 되고 사내 성능 플래시 계층으로 다시 이동됩니다.

image:cloud-fabricpool_image4.png["오류: 그래픽 이미지가 없습니다"]



=== 자동 계층화 정책

다음 그림에 나와 있는 FabricPool 자동 계층화 정책은 콜드 스냅샷 데이터 블록을 클라우드로 이동할 뿐만 아니라 액티브 파일 시스템의 콜드 블록도 모두 이동합니다. 여기에는 VM 템플릿과 데이터 저장소 볼륨의 사용되지 않는 VM 데이터가 포함될 수 있습니다. 이동하는 콜드 블록은 볼륨에 대한 계층화-최소-냉각-일 설정으로 제어됩니다. 클라우드 계층의 콜드 블록이 애플리케이션에서 무작위로 읽히는 경우 해당 블록이 핫 블록으로 만들어졌으며 성능 계층으로 다시 돌아갑니다. 하지만 콜드 블록을 바이러스 백신 스캐너와 같은 순차적 프로세스에서 읽는 경우 블록이 콜드 상태로 유지되고 클라우드 오브젝트 저장소에서 유지되지만 성능 계층으로 다시 이동되지 않습니다.

자동 계층화 정책을 사용하면 자주 액세스하지 않는 블록이 클라우드 연결 속도로 클라우드 계층에서 다시 가져옵니다. 애플리케이션의 지연 시간에 민감한 경우 VM 성능에 영향을 미칠 수 있으며, 데이터 저장소에서 자동 계층화 정책을 사용하기 전에 이 정책을 고려해야 합니다. 적절한 성능을 위해 10GbE 속도로 포트에 Intercluster LIF를 배치하는 것이 좋습니다.


NOTE: 오브젝트 저장소 프로파일러는 FabricPool 애그리게이트에 연결하기 전에 오브젝트 저장소에 대한 대기 시간 및 처리량을 테스트하는 데 사용해야 합니다.

image:cloud-fabricpool_image5.png["오류: 그래픽 이미지가 없습니다"]



=== 모든 계층화 정책

자동 및 스냅샷 전용 정책과 달리 모든 계층화 정책은 전체 데이터 볼륨을 즉시 클라우드 계층으로 이동합니다. 이 정책은 데이터를 기록 또는 규제 목적으로 보관해야 하지만 거의 액세스하지 않는 보조 데이터 보호 또는 아카이브 볼륨에 가장 적합합니다. 데이터 저장소에 기록된 모든 데이터가 클라우드 계층으로 즉시 이동되므로 VMware 데이터 저장소 볼륨에는 All 정책이 권장되지 않습니다. 후속 읽기 작업은 클라우드에서 수행되며 데이터 저장소 볼륨에 상주하는 VM 및 애플리케이션의 성능 문제가 발생할 가능성이 있습니다.



== 보안

보안은 클라우드 및 FabricPool의 중앙 관심사입니다. ONTAP의 모든 기본 보안 기능은 성능 계층에서 지원되며, 데이터가 클라우드 계층으로 전송될 때 안전하게 보호됩니다. FabricPool는 를 사용합니다 https://tools.ietf.org/html/rfc5288["AES-256-GCM"^] 성능 계층에서 암호화 알고리즘을 사용하며 이 암호화 수준을 클라우드 계층으로 유지합니다. 클라우드 오브젝트 저장소로 이동하는 데이터 블록은 TLS(Transport Layer Security) v1.2를 통해 보호되어 스토리지 계층 간의 데이터 기밀성 및 무결성을 유지합니다.


NOTE: 암호화되지 않은 연결을 통해 클라우드 오브젝트 저장소와 통신하는 것은 지원되지만 NetApp에서는 권장하지 않습니다.



=== 데이터 암호화

데이터 암호화는 지적 재산, 거래 정보 및 개인 식별 고객 정보를 보호하는 데 매우 중요합니다. FabricPool는 NVE(NetApp Volume Encryption) 및 NetApp Storage Encryption(NSE)을 완벽하게 지원하여 기존 데이터 보호 전략을 유지합니다. 성능 계층에서 암호화된 모든 데이터는 클라우드 계층으로 이동할 때 암호화된 상태로 유지됩니다. 클라이언트측 암호화 키는 ONTAP의 소유이며 서버측 오브젝트 저장소 암호화 키는 해당 클라우드 오브젝트 저장소에서 소유합니다. NVE로 암호화되지 않은 모든 데이터는 AES-256-GCM 알고리즘으로 암호화됩니다. 다른 AES-256 암호화 암호는 지원되지 않습니다.


NOTE: NSE 또는 NVE는 선택 사항이며 FabricPool를 사용할 필요가 없습니다.
